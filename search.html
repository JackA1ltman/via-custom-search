<style>
    .weather {
        position: relative;
        font-size: 13px;
    }
    .spaner {
        display: inline;
    }
</style>
<div class="weather">æˆ‘åœ¨å“ªé‡Œå™¢ï¼Ÿç­”ï¼š<span id="outputCity" class="spaner"></span></div>
<div class="weather">ä»Šæ—¥å¤©æ°”ğŸŒ¤ï¼š<span id="outputWeather" class="spaner"></span></div>
<div class="weather">æœ€é«˜æ¸©åº¦â˜€ï¼š<span id="outputHigh" class="spaner"></span>â„ƒï¼Œæœ€ä½æ¸©åº¦â˜ï¼š<span id="outputLow" class="spaner"></span>â„ƒ</div>
<div id="dataContainer"></div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script> <!-- å¯æ›´æ¢æœ¬åœ°jQueryæ–‡ä»¶ï¼Œæˆ–è€…é€Ÿåº¦æ›´å¿«çš„jQueryCDN -->
<script>
    var amapKey = "ä½ çš„KEY"; //é«˜å¾·åœ°å›¾çš„KEYï¼Œè¯·æ›¿æ¢æˆæ‚¨è‡ªå·±çš„KEY
    var seniverseKey = "ä½ çš„KEY"; //å¿ƒçŸ¥å¤©æ°”çš„KEYï¼Œè¯·æ›¿æ¢æˆæ‚¨è‡ªå·±çš„KEY
    document.title = "ç”Ÿæ´»ä»ç„¶å¾ˆç¾å¥½^_^ï¼Œæ‰€ä»¥è¿˜è¯·å¤šå¤šåŠ æ²¹å–”ï¼"
    try{
        $.ajax({
        url: 'https://restapi.amap.com/v3/ip?key='+amapKey, 
        type: 'GET',
        dataType: 'jsonp',
        success: function(data1, textStatus1, jqXHR1) {
            //console.log(data1); // è¾“å‡ºAPIè¿”å›çš„æ•°æ®
            $("#outputCity").text(data1.city);
            $.ajax({
                url: 'https://api.seniverse.com/v3/weather/daily.json?key='+seniverseKey+'&&location='+data1.city, 
                type: 'GET',
                dataType: 'json',
                success: function(data2, textStatus2, jqXHR2) {
                    //console.log(data2); // è¾“å‡ºAPIè¿”å›çš„æ•°æ®
                    $("#outputWeather").text(data2.results[0].daily[0].text_day); 
                    $("#outputHigh").text(data2.results[0].daily[0].high); 
                    $("#outputLow").text(data2.results[0].daily[0].low); 
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    document.getElementById("outputCity").innerHTML = "é”™è¯¯å˜ï¼Œå¯èƒ½æ˜¯APIå¯„äº†å™¢";
                    document.getElementById("outputWeather").innerHTML = "é”™è¯¯å˜";  
                    document.getElementById("outputHigh").innerHTML = "é”™è¯¯å˜";
                    document.getElementById("outputLow").innerHTML = "é”™è¯¯å˜";
                }
            });
        },
        error: function(jqXHR, textStatus, errorThrown) {
            document.getElementById("outputCity").innerHTML = "é”™è¯¯å˜ï¼Œå¯èƒ½æ˜¯APIæˆ–ç½‘ç»œå¯„äº†å™¢";
            document.getElementById("outputWeather").innerHTML = "é”™è¯¯å˜";  
            document.getElementById("outputHigh").innerHTML = "é”™è¯¯å˜";
            document.getElementById("outputLow").innerHTML = "é”™è¯¯å˜";
            }
        });
    } catch(error) {
        document.getElementById("outputCity").innerHTML = "é”™è¯¯å˜ï¼Œå¯èƒ½æ˜¯jQueryæ²¡æœ‰æ‹‰å–æˆåŠŸå™¢";
        document.getElementById("outputWeather").innerHTML = "é”™è¯¯å˜";
        document.getElementById("outputHigh").innerHTML = "é”™è¯¯å˜";
        document.getElementById("outputLow").innerHTML = "é”™è¯¯å˜";
        console.log(error);
    }
</script>